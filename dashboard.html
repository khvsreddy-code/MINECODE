<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MineCode - Dashboard</title>

    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://unpkg.com/pixelarticons@1.8.1/css/pixelarticons.css" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/monocraft" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/cyber-engine.css">
    <link rel="stylesheet" href="styles/hero-effects.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/pixel-icons.css">
    <link rel="stylesheet" href="styles/gamification.css">
    <link rel="stylesheet" href="styles/mobile.css">

    <!-- True Pixel Fonts from Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Anime.js for Creative Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>



    <script>
        // AUTH CHECK - Redirect to Landing if no user
        (function () {
            const saved = localStorage.getItem('minecode_save_v1');
            if (!saved) {
                window.location.href = 'index.html';
            }
        })();
    </script>
</head>

<body>
    <div id="app">

        <!-- Animated Cyber Background -->
        <div class="cyber-bg">
            <canvas id="matrix-canvas"></canvas>
            <div class="crt-overlay"></div> <!-- Vignette/Scanlines -->
            <div class="grid-overlay"></div>
            <div class="floating-particles"></div>
        </div>

        <!-- Top Navigation -->
        <nav id="topnav" class="topnav">
            <div class="nav-left">
                <button class="nav-burger" id="mobile-menu-btn"
                    style="display: none; background: none; border: none; color: white; margin-right: 12px; cursor: pointer;">
                    <i data-lucide="menu"></i>
                </button>
                <a href="#" class="nav-brand" data-route="home">
                    <span class="brand-icon cyber-glow"><i data-lucide="zap"
                            style="width:24px;height:24px;color:#ffc800;"></i></span>
                    <span class="brand-text">MineCode</span>
                </a>
                <div class="nav-menu">
                    <div class="nav-item has-dropdown">
                        <button class="nav-btn active" data-route="courses" onclick="navigateTo('courses')">Learn
                            ▾</button>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <!-- Column 1: Data Science -->
                                <div class="mega-column">
                                    <h4>DATA SCIENCE</h4>
                                    <a href="#" class="mega-link" onclick="navigateTo('course-python')"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/script.svg" width="16"
                                            style="filter: invert(1);"> Python</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/chart-bar.svg" width="16"
                                            style="filter: invert(1);"> Intermediate Python</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/grid.svg" width="16"
                                            style="filter: invert(1);"> NumPy</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/database.svg" width="16"
                                            style="filter: invert(1);"> SQL</a>
                                    <a href="#" class="mega-link featured"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/brain.svg" width="16"
                                            style="filter: invert(1);"> Machine Learning</a>
                                </div>

                                <!-- Column 2: Web Development -->
                                <div class="mega-column">
                                    <h4>WEB DEVELOPMENT</h4>
                                    <a href="#" class="mega-link" onclick="navigateTo('course-html')"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/layout.svg" width="16"
                                            style="filter: invert(1);"> HTML</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/art-text.svg" width="16"
                                            style="filter: invert(1);"> CSS</a>
                                    <a href="#" class="mega-link" onclick="navigateTo('course-js')"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/code.svg" width="16"
                                            style="filter: invert(1);"> JavaScript</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/zap.svg" width="16"
                                            style="filter: invert(1);"> React</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/server.svg" width="16"
                                            style="filter: invert(1);"> Node.js</a>
                                </div>

                                <!-- Column 3: Tools -->
                                <div class="mega-column">
                                    <h4>TOOLS</h4>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/terminal.svg" width="16"
                                            style="filter: invert(1);"> Command Line</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/git-merge.svg" width="16"
                                            style="filter: invert(1);"> Git & GitHub</a>
                                    <a href="#" class="mega-link featured"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/android.svg" width="16"
                                            style="filter: invert(1);"> GitHub Copilot</a>
                                </div>

                                <!-- Column 4: Computer Science (New) -->
                                <div class="mega-column">
                                    <h4>COMPUTER SCIENCE</h4>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/chip.svg" width="16"
                                            style="filter: invert(1);"> C++</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/coffee.svg" width="16"
                                            style="filter: invert(1);"> Java</a>
                                    <a href="#" class="mega-link"><img
                                            src="https://unpkg.com/pixelarticons@1.8.1/svg/device-gamepad.svg"
                                            width="16" style="filter: invert(1);"> Game Dev</a>
                                    <a href="#" class="mega-link"
                                        style="margin-top: 16px; color: var(--neon-cyan); font-weight: 700; font-size: 13px;">VIEW
                                        ALL COURSES →</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="nav-dropdown">
                        <button class="nav-btn">Practice ▾</button>
                        <div class="dropdown-content">
                            <a href="#" data-route="practice">Challenge Packs</a>
                            <a href="#" data-route="builds">Project Builds</a>
                            <a href="#" data-route="practice">#30DaysOfCode</a>
                        </div>
                    </div>
                    <button class="nav-btn" data-route="builds">Build</button>
                    <button class="nav-btn" data-route="community">Community</button>
                </div>
            </div>
            <div class="nav-right">
                <button class="nav-icon" title="Search"><i data-lucide="search"
                        style="width:20px;height:20px;"></i></button>
                <button class="nav-icon notification-badge" title="Notifications"><i data-lucide="bell"
                        style="width:20px;height:20px;"></i></button>
                <div class="nav-avatar" id="nav-avatar" title="Profile">
                    <i data-lucide="user" style="width:20px;height:20px;"></i>
                </div>
            </div>
        </nav>

        <!-- Main Layout -->
        <div id="main-layout" class="main-layout"
            style="display: grid; grid-template-columns: 1fr 320px; gap: 32px; max-width: 1600px; margin: 0 auto; padding: 100px 32px 32px 32px;">

            <!-- CONTENT AREA -->
            <div id="main-content" style="min-height: 80vh;">
                <!-- DYNAMIC CONTENT LOADED HERE -->
            </div>

            <!-- RIGHT SIDEBAR (Desktop Only) -->
            <aside class="right-sidebar">
                <!-- User Stats Card -->
                <div class="cyber-card profile-mini">
                    <div class="profile-header">
                        <div class="avatar-circle">
                            <i data-lucide="user"></i>
                        </div>
                        <div class="profile-text">
                            <h3 id="stat-name">Guest</h3>
                            <div class="profile-level">
                                <span class="level-badge">LVL 1</span>
                                <span class="xp-text"><span id="stat-xp">0</span> XP</span>
                            </div>
                        </div>
                    </div>

                    <div class="stats-row">
                        <div class="stat-item">
                            <i data-lucide="flame" class="stat-icon-sm" style="color: var(--neon-orange);"></i>
                            <span class="stat-val" id="stat-streak">0</span>
                            <span class="stat-label">STREAK</span>
                        </div>
                        <div class="stat-item">
                            <i data-lucide="award" class="stat-icon-sm" style="color: var(--neon-cyan);"></i>
                            <span class="stat-val">0</span>
                            <span class="stat-label">BADGES</span>
                        </div>
                        <div class="stat-item">
                            <i data-lucide="code" class="stat-icon-sm" style="color: var(--neon-purple);"></i>
                            <span class="stat-val">0</span>
                            <span class="stat-label">PROJECTS</span>
                        </div>
                    </div>

                    <button class="btn-cyber-outline" style="width: 100%; margin-top: 16px;"
                        onclick="navigateTo('profile')">VIEW PROFILE</button>
                </div>
                <!-- Events Card -->
                <div class="cyber-card">
                    <div class="card-title"><i data-lucide="calendar" style="margin-right: 8px;"></i> Upcoming Events
                    </div>
                    <div class="event-item">
                        <div class="event-date">
                            <span class="month">DEC</span>
                            <span class="day">22</span>
                        </div>
                        <div class="event-info">
                            <h4>Game Jam 2025</h4>
                            <span>10:00 AM EST</span>
                        </div>
                    </div>
                    <div class="event-item">
                        <div class="event-date">
                            <span class="month">JAN</span>
                            <span class="day">05</span>
                        </div>
                        <div class="event-info">
                            <h4>Python Workshop</h4>
                            <span>2:00 PM EST</span>
                        </div>
                    </div>
                </div>

                <!-- Footer / Credits -->
                <div
                    style="margin-top: 24px; text-align: center; color: var(--text-muted); font-size: 12px; font-family: var(--font-code);">
                    <p>MineCode v0.9.5 (Alpha)</p>
                    <p style="margin-top: 4px;">© 2025 MineCode Inc.</p>
                </div>

            </aside>
        </div>

        <!-- Ko-fi Button Bottom Right -->

        <style>
            .floating-chat-kofi-popup-iframe {
                bottom: 20px !important;
                right: 20px !important;
            }
        </style>

        <!-- Views Container -->
        <div id="courses-view" class="view hidden">
            <div class="view-container">
                <h1 class="view-title cyber-text" style="font-size: 24px;">COURSES CATALOG</h1>
                <div class="courses-grid" id="all-courses-grid"></div>
            </div>
        </div>

        <div id="course-view" class="view hidden">
            <div class="course-layout" style="max-width: 1000px; margin: 0 auto;">
                <div id="course-content"></div>
                <div id="course-sidebar"></div>
            </div>
        </div>

        <div id="lesson-view" class="view hidden">
            <div class="workspace-layout">
                <div class="workspace-left" id="lesson-instructions"></div>
                <div class="workspace-right">
                    <div class="editor-panel" id="code-editor"></div>
                    <div class="terminal-panel" id="terminal"></div>
                </div>
            </div>
            <div class="lesson-nav" id="lesson-nav"></div>
        </div>

        <div id="community-view" class="view hidden">
            <div class="community-layout">
                <div class="community-channels" id="channels-list"></div>
                <div class="community-feed" id="posts-feed"></div>
                <div class="community-aside" id="community-sidebar"></div>
            </div>
        </div>

    </div>

    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Scripts -->
    <script src="scripts/effects/matrix-rain.js"></script>
    <script src="scripts/effects/tilt-effect.js"></script>
    <script src="scripts/effects/rain-effect.js"></script>
    <script src="scripts/supabase-client.js"></script>
    <script src="scripts/effects/reveal-text.js"></script>
    <script src="scripts/modules/ui-utils.js"></script>
    <script src="scripts/modules/auth.js"></script>
    <script src="scripts/modules/components.js"></script>
    <script src="scripts/core/nav.js"></script>
    <script src="scripts/modules/topics.js"></script>
    <script src="scripts/modules/challenges.js"></script>
    <script src="scripts/modules/cyber-buttons.js"></script>
    <script src="scripts/modules/gamification.js"></script>

    <!-- Main App Logic -->
    <script src="scripts/cyber-app.js"></script>


    <!-- Initialize Lucide Icons on page load -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (window.lucide) {
                window.lucide.createIcons();
            }
        });
    </script>

    <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
    <script>
        kofiWidgetOverlay.draw('Support MineCode', {
            'type': 'floating-chat',
            'floating-chat.donateButton.text': 'Support',
            'floating-chat.donateButton.background-color': '#00b9fe',
            'floating-chat.donateButton.text-color': '#fff'
        });
    </script>
</body>

</html>